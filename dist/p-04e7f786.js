import{r as t,g as e}from"./p-2e3e1c7e.js";import{c as s,e as o,b as n}from"./p-7d841ea6.js";import{u as i}from"./p-abcd1c57.js";import{u as a}from"./p-9c1f6fe5.js";import{u as c}from"./p-78249524.js";import{u as r,b as h}from"./p-c64f4878.js";const u={toggle:t=>!r.get(t),increment:(t,e)=>{const s=r.get(t);return(100*i(s)+100*(e||1))/100},decrement:(t,e)=>{const s=r.get(t);return(100*i(s)-100*(e||1))/100},getLink:t=>t.$event.target.pathname||function(t){let e="";return Array.from(t||[]).some((t=>(e=t.pathname||"",!!t.pathname))),e}(t.$event.path),push:(t,e)=>[...r.get(t)||[],e]};function m(t,e,s){const n=r.set(t,s,e.mode),i=JSON.parse(localStorage.getItem("uniStoreDebug"));i&&i[t.type]&&i[t.type].includes("set")&&function(t,e,s){console.log("%cSTORE SET:","color: darkred; font-weight: bold",Object.assign(Object.assign(Object.assign({},t),e),{value:s,$event:void 0}))}(t,e,n),setTimeout((()=>{const n=a(e.dispatch);p(n,t,s),o(s)&&d(n,h(t),t.separator,s)}))}function p(t,e,s){const o=h(e);t.forEach((t=>{t.dispatchEvent(new CustomEvent(o,{detail:s}))})),window.top.document.body.dispatchEvent(new CustomEvent(o,{detail:s}));const n=Object.assign({},e),i=e.path.split("."),a=i.pop();i.length>0&&(a.includes("[")&&i.push(a.split("[")[0]),n.path=i.join("."),p(t,n,r.get(n)))}function d(t,e,s,n){for(let[i,a]of Object.entries(n)){const n=e+s+i;o(a)&&d(t,n,s,a),t.forEach((t=>{t.dispatchEvent(new CustomEvent(n,{detail:a}))})),window.top.document.body.dispatchEvent(new CustomEvent(n,{detail:a}))}}const f=class{constructor(e){t(this,e),this.activate=!1,this.inactive=!1,this.mode="merge",this.type="memory",this.feature="uni.store",this.separator=".",this.dispatch="uni-event, uni-event-shadow",this.bindStart="{{",this.bindEnd="}}"}onChange(){const{type:t,feature:e,separator:o,path:a,mode:c,state:r,action:h,dispatch:p}=this,d={type:t,feature:e,separator:o,path:a},f={mode:c,state:r,action:h,dispatch:p},l=[t,e,o,a,r,h,p];(s(this.state)||s(this.action))&&n(l,this.bindStart,this.bindEnd)&&(this.inactive&&!this.activate||function(t,e){t.path=t.path||"",s(e.state)?(e.state=i(e.state),m(t,e,e.action?u[e.action](t,e.state):e.state)):s(e.action)&&m(t,e,u[e.action](t))}(d,f)),setTimeout((()=>this.activate=!1))}onActivate(){this.onChange()}onInactive(){this.onChange()}onState(){this.onChange()}componentDidLoad(){c("uni-store-set","bottom"),this.onChange()}get el(){return e(this)}static get watchers(){return{activate:["onActivate"],inactive:["onInactive"],state:["onState"]}}};export{f as U}