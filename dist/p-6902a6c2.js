import{r as t,h as s,g as i}from"./p-0973bc72.js";import{U as e}from"./p-12df985d.js";import{u as o}from"./p-e282851d.js";import{u as a,a as n,b as h}from"./p-8ae84c93.js";import{i as r,u as c,a as u,b as d,c as p}from"./p-734c8632.js";import{b as l,u as m}from"./p-6c1d584d.js";import{u as f}from"./p-d16873c3.js";const v=class{constructor(s){t(this,s),this.inactive=!1,this.once=!1,this.capture=!1,this.all=!1,this.prevent=!1,this.stop=!1}disconnect(){this.isConnected&&(a(this.el,this.listen),this.isConnected=!1)}connectedCallback(){n(this),this.isConnected=h(this)}render(){return this.disconnect(),n(this),this.isConnected=h(this),e(s("slot",null))}componentDidLoad(){o("udk")}disconnectedCallback(){this.disconnect()}get el(){return i(this)}},w=class{constructor(s){t(this,s),this.inactive=!1,this.activateNext=!1,this.once=!1,this.top=!1,this.type="memory",this.feature="uni.store",this.separator=".",this.all=!1}render(){const{type:t,feature:i,separator:o,path:a}=this;return e(s("uni-event",{inactive:!r(this.listen)&&this.inactive,once:this.once,capture:!0,listen:this.listen||l({type:t,feature:i,separator:o,path:a}),prop:"activate",value:!0},s("uni-store-get",{inactive:r(this.listen)||this.inactive,activateNext:this.activateNext,top:this.top,type:this.type,feature:this.feature,separator:this.separator,path:this.path,equal:this.equal,noEqual:this.noEqual,all:this.all,selector:this.selector,prop:this.prop,value:this.value},s("slot",null))))}componentDidLoad(){o("udk")}get el(){return i(this)}};function b(t,s){var i,e;const{top:o,shadow:a,frame:n,mode:h,state:p,dispatch:v}=s,w=m.get(t,o),b=c(p);t.path=t.path||"";const O=m.set(t,b,h,o),k=JSON.parse(localStorage.getItem("uni.debug"));!k||r(k.types)&&!(null===(i=k.types)||void 0===i?void 0:i.includes(t.type))||r(k.path)&&!t.path.includes(k.path)||r(k.modes)&&!(null===(e=k.modes)||void 0===e?void 0:e.includes(h))||function(t,s,i){console.log(Object.assign(Object.assign(Object.assign({},t),s),{value:i}))}(t,s,O),setTimeout((()=>{const s=f({top:o,shadow:a,frame:n,selector:v});j(o,s,t,b),u(b)?g(o,s,l(t),t.separator,b):d(b)?y(o,s,l(t),t.separator,b):u(w)&&function(t,s,i,e,o,a){for(let[n]of Object.entries(a))u(o)&&!r(o[n])&&C(t,s,i+e+n,e,void 0)}(o,s,l(t),t.separator,b,w)}))}function j(t,s,i,e){const o=l(i);s.forEach((t=>{t.dispatchEvent(new CustomEvent(o,{detail:e}))})),(t?window.top:window).document.body.dispatchEvent(new CustomEvent(o,{detail:e}));const a=Object.assign({},i),n=i.path.split(i.separator),h=n.pop();h.includes("[")&&n.push(h.split("[")[0]),n.length>0&&(a.path=n.join(i.separator),j(t,s,a,m.get(a,t)))}function g(t,s,i,e,o){for(let[a,n]of Object.entries(o))C(t,s,i+e+a,e,n)}function y(t,s,i,e,o){o.forEach(((o,a)=>{C(t,s,`${i}[${a}]`,e,o)}))}function C(t,s,i,e,o){u(o)?g(t,s,i,e,o):d(o)&&y(t,s,i,e,o),s.forEach((t=>{t.dispatchEvent(new CustomEvent(i,{detail:o}))})),(t?window.top:window).document.body.dispatchEvent(new CustomEvent(i,{detail:o}))}const O=class{constructor(s){t(this,s),this.inactive=!1,this.activate=!1,this.top=!1,this.shadow=!1,this.frame=!1,this.mode="merge",this.type="memory",this.feature="uni.store",this.separator=".",this.dispatch="uni-event, uni-event-shadow"}onChange(){const{top:t,shadow:s,frame:i,mode:e,type:o,feature:a,separator:n,path:h,state:c,dispatch:u}=this,d={type:o,feature:a,separator:n,path:h},l={top:t,shadow:s,frame:i,mode:e,state:c,dispatch:u},f=m.get(d,t);this.inactive&&!this.activate||(r(c)&&!p(c,f)&&b(d,l),setTimeout((()=>this.activate=!1)))}onActivate(){this.onChange()}onInactive(){this.onChange()}onState(){this.onChange()}componentDidLoad(){o("udk"),this.onChange()}get el(){return i(this)}static get watchers(){return{activate:["onActivate"],inactive:["onInactive"],state:["onState"]}}};export{v as U,w as a,O as b}