import{r as t,g as s}from"./p-dcd71f28.js";import{u as n}from"./p-78249524.js";import{i as o,d as a}from"./p-4bd9bf92.js";import{u as i}from"./p-f3c42451.js";function r(t){const{ext:s,path:n,params:r,noParams:h,prevent:p,reload:d}=this,m=new URLSearchParams(window.top.location.search);t&&!d&&t.preventDefault(),o(r)&&new URLSearchParams(r).forEach(((t,s)=>{m.set(s,t)})),o(h)&&h.split("&").forEach((t=>{m.delete(t)}));const f=window.top.location,u=f.search.includes("?")?f.search:`?${f.search}`,w=s?i(this,"a","href"):"";if(!a(w)){const t=w.split("?")[1];t&&new URLSearchParams(t).forEach(((t,s)=>{m.set(s,t)}))}if(c(n,f)||e(w,f)||u!==`?${m.toString()}`){const t=`${[...m.keys()].length>0?"?":""}${m.toString()}`;window.top.history.pushState({},"",function(t,s,n,o){return c(t,n)?`${n.protocol}//${n.host}${t}`:!o&&e(s,n)?s.split("?")[0]:`${n.protocol}//${n.host}${n.pathname}`}(n,w,f,p)+t),window.top.dispatchEvent(new PopStateEvent("popstate",{state:{path:n,href:w,params:r,noParams:h}}))}d&&window.location.reload()}function e(t,s){return!a(t)&&t!==s.href}function c(t,s){return!!o(t)&&t!==s.pathname}const h=class{constructor(s){t(this,s),this.activate=!1,this.ext=!1,this.prevent=!1,this.reload=!1}connectedCallback(){this.el.addEventListener("click",r)}componentDidRender(){this.activate&&(r.apply(this),setTimeout((()=>this.activate=!1)))}componentDidLoad(){n("uni-router-link","do")}disconnectedCallback(){this.el.removeEventListener("click",r)}get el(){return s(this)}};export{h as U,r as u}