import{r as t,g as e}from"./p-dcd71f28.js";import{i as o,d as s,c as i}from"./p-a937deb3.js";import{u as a}from"./p-78249524.js";import{u as n}from"./p-01fcf2fe.js";import{u as c}from"./p-eed2553d.js";import{u as r,b as h}from"./p-4b35b64c.js";function d(t,e){var i,a;const{top:d,shadow:p,frame:f,mode:v,dispatch:w,state:l}=e,b=n(l);t.path=t.path||"";const j=r.set(t,b,v,d),g=JSON.parse(localStorage.getItem("uni.debug"));!g||o(g.types)&&!(null===(i=g.types)||void 0===i?void 0:i.includes(t.type))||o(g.path)&&!t.path.includes(g.path)||o(g.modes)&&!(null===(a=g.modes)||void 0===a?void 0:a.includes(v))||function(t,e,o){console.log(Object.assign(Object.assign(Object.assign({},t),e),{value:o}))}(t,e,j),setTimeout((()=>{const e=c({top:d,shadow:p,frame:f,selector:w});m(d,e,t,b),s(b)&&u(d,e,h(t),t.separator,b)}))}function m(t,e,o,s){const i=h(o);e.forEach((t=>{t.dispatchEvent(new CustomEvent(i,{detail:s}))})),(t?window.top:window).document.body.dispatchEvent(new CustomEvent(i,{detail:s}));const a=Object.assign({},o),n=o.path.split(o.separator),c=n.pop();n.length>0&&(c.includes("[")&&n.push(c.split("[")[0]),a.path=n.join(o.separator),m(t,e,a,r.get(a,t)))}function u(t,e,o,s,i){for(let[a,n]of Object.entries(i))p(t,e,o+s+a,s,n)}function p(t,e,o,a,n){s(n)?u(t,e,o,a,n):i(n)&&function(t,e,o,s,i){i.forEach(((i,a)=>{p(t,e,`${o}[${a}]`,s,i)}))}(t,e,o,a,n),e.forEach((t=>{t.dispatchEvent(new CustomEvent(o,{detail:n}))})),(t?window.top:window).document.body.dispatchEvent(new CustomEvent(o,{detail:n}))}const f=class{constructor(e){t(this,e),this.inactive=!1,this.activate=!1,this.top=!1,this.shadow=!1,this.frame=!1,this.mode="merge",this.type="memory",this.feature="uni.store",this.separator=".",this.dispatch="uni-event, uni-event-shadow"}onChange(){const{top:t,shadow:e,frame:s,mode:i,type:a,feature:n,separator:c,path:r,state:h,dispatch:m}=this,u={type:a,feature:n,separator:c,path:r},p={top:t,shadow:e,frame:s,mode:i,state:h,dispatch:m};this.inactive&&!this.activate||(o(this.state)&&d(u,p),setTimeout((()=>this.activate=!1)))}onActivate(){this.onChange()}onInactive(){this.onChange()}onState(){this.onChange()}componentDidLoad(){a("uni-store-set","bottom"),this.onChange()}get el(){return e(this)}static get watchers(){return{activate:["onActivate"],inactive:["onInactive"],state:["onState"]}}};export{f as U}