import{r as t,g as s}from"./p-dcd71f28.js";import{u as n}from"./p-78249524.js";import{i as o,d as a}from"./p-4bd9bf92.js";import{u as i}from"./p-f3c42451.js";function r(t){const{ext:s,path:n,params:a,noParams:r,prevent:h,reload:p}=this,d=new URLSearchParams(window.top.location.search),m=new URLSearchParams(a);t&&!p&&t.preventDefault(),o(a)&&m.forEach(((t,s)=>{d.set(s,t)})),o(r)&&r.split("&").forEach((t=>{d.delete(t)}));const u=window.top.location,f=u.search.includes("?")?u.search:`?${u.search}`,w=`${[...d.keys()].length>0?"?":""}${d.toString()}`,l=s?i(this,"a","href"):"";(e(n,u)||c(l,u)||f!==`?${d.toString()}`)&&(window.top.history.pushState({},"",function(t,s,n,o){return e(t,n)?`${n.protocol}//${n.host}${t}`:!o&&c(s,n)?s:`${n.protocol}//${n.host}${n.pathname}`}(n,l,u,h)+w),window.top.dispatchEvent(new PopStateEvent("popstate",{state:{path:n,href:l,params:a,noParams:r}}))),p&&window.location.reload()}function e(t,s){return!!o(t)&&t!==s.pathname}function c(t,s){return!a(t)&&t!==s.href}const h=class{constructor(s){t(this,s),this.activate=!1,this.ext=!1,this.prevent=!1,this.reload=!1}connectedCallback(){this.el.addEventListener("click",r)}componentDidRender(){this.activate&&(r.apply(this),setTimeout((()=>this.activate=!1)))}componentDidLoad(){n("uni-router-link","do")}disconnectedCallback(){this.el.removeEventListener("click",r)}get el(){return s(this)}};export{h as U,r as u}